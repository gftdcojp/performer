# Performer

**ãƒ—ãƒ­ã‚»ã‚¹é›†ç´„å‹Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** - å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã‚’å®šç¾©ãƒ»å®Ÿè¡Œ

Performerã¯ã€**1ã¤ã®TypeScriptãƒ•ã‚¡ã‚¤ãƒ« = 1ã¤ã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹**ã¨ã„ã†é©æ–°çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã€è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®£è¨€çš„ãƒ»é›†ç´„çš„ã«ç®¡ç†ã§ãã‚‹Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

## ğŸŒŸ ç‰¹å¾´

### ğŸ¯ ãƒ—ãƒ­ã‚»ã‚¹é›†ç´„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ« = 1ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹** - å‹å®šç¾©ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ãƒ»UIãƒ»çŠ¶æ…‹é·ç§»ã‚’1ç®‡æ‰€ã§ç®¡ç†
- **å®£è¨€çš„ãƒ—ãƒ­ã‚»ã‚¹å®šç¾©** - ã‚³ãƒ¼ãƒ‰è‡ªä½“ãŒè¨­è¨ˆå›³ã¨ãªã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **BPMNäº’æ›ãƒãƒƒãƒ”ãƒ³ã‚°** - XStateã®çŠ¶æ…‹æ©Ÿæ¢°ã‚’BPMNå›³ã«å¤‰æ›å¯èƒ½

### ğŸ”§ ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼
- **Effect-TS** - é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã‚ˆã‚‹å‰¯ä½œç”¨ç®¡ç†ã¨å‹å®‰å…¨æ€§
- **XState Actor** - ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³ã«ã‚ˆã‚‹å …ç‰¢ãªçŠ¶æ…‹ç®¡ç†
- **Web Components** - æ¨™æº–ãƒ™ãƒ¼ã‚¹ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ActorDB** - ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- **Sagaãƒ‘ã‚¿ãƒ¼ãƒ³** - åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### ğŸš€ é«˜åº¦ãªæ©Ÿèƒ½
- **Dynamic Process Loading** - ãƒ—ãƒ­ã‚»ã‚¹å + Hashã«ã‚ˆã‚‹å®Ÿè¡Œæ™‚å‹•çš„èª­ã¿è¾¼ã¿
- **Capabilityãƒ™ãƒ¼ã‚¹èªå¯** - ãã‚ç´°ã‚„ã‹ãªæ¨©é™ç®¡ç†
- **Sagaã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** - è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã®å”èª¿å®Ÿè¡Œã¨è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- **ãƒ—ãƒ­ã‚»ã‚¹ãƒ¬ã‚¸ã‚¹ãƒˆãƒª** - å®Ÿè¡Œæ™‚ã®ãƒ—ãƒ­ã‚»ã‚¹ç™ºè¦‹ãƒ»ç®¡ç†
- **CLIãƒ„ãƒ¼ãƒ«ç¾¤** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆ

## ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/com-junkawasaki/performer.git
cd performer

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# CLIã‚’ãƒ“ãƒ«ãƒ‰
pnpm run build:cli

# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ãƒªãƒ³ã‚¯ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
npm link
```

## ğŸ¯ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```bash
# Performerãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
performer init my-app

cd my-app
pnpm install
pnpm run dev
```

### 2. ãƒ—ãƒ­ã‚»ã‚¹å®šç¾©

```typescript
// src/processes/user-onboarding.process.ts
export const processMetadata = {
  id: 'user-onboarding',
  name: 'User Onboarding Process',
  type: 'single' as const,
  version: '1.0.0',
  hash: 'a1b2c3d4'
};

// Effect-TSã«ã‚ˆã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
// XStateã«ã‚ˆã‚‹çŠ¶æ…‹æ©Ÿæ¢°å®šç¾©
// Web Componentsã«ã‚ˆã‚‹UIå®šç¾©
// ã™ã¹ã¦ã“ã®1ãƒ•ã‚¡ã‚¤ãƒ«ã«é›†ç´„
```

### 3. å‹•çš„ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ

```bash
# ãƒ—ãƒ­ã‚»ã‚¹å + Hashã§å‹•çš„èª­ã¿è¾¼ã¿
open "http://localhost:5173/?process=user-onboarding&hash=a1b2c3d4"

# Sagaãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ
open "http://localhost:5173/?process=complete-user-onboarding&hash=e5f6g7h8"
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ—ãƒ­ã‚»ã‚¹é›†ç´„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
src/processes/
â”œâ”€â”€ user-onboarding.process.ts        # ğŸ”„ å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹
â”œâ”€â”€ complete-user-onboarding.saga.ts  # ğŸ­ Sagaãƒ—ãƒ­ã‚»ã‚¹
â””â”€â”€ order-fulfillment.process.ts      # ğŸ“¦ è¿½åŠ ãƒ—ãƒ­ã‚»ã‚¹...
```

å„ãƒ—ãƒ­ã‚»ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ï¼š
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿** - ID, ã‚¿ã‚¤ãƒ—, ãƒãƒ¼ã‚¸ãƒ§ãƒ³, Hash
- **Effect-TSãƒ­ã‚¸ãƒƒã‚¯** - å‹å®‰å…¨ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- **XStateãƒã‚·ãƒ³** - çŠ¶æ…‹é·ç§»ã¨BPMNãƒãƒƒãƒ”ãƒ³ã‚°
- **Web Components** - ãƒ—ãƒ­ã‚»ã‚¹å›ºæœ‰ã®UI
- **çµ±åˆãƒ†ã‚¹ãƒˆ** - ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã®æ¤œè¨¼

### Unified Process Registry

```typescript
import { ProcessRegistry } from 'performer';

// ãƒ—ãƒ­ã‚»ã‚¹å + Hashã§å‹•çš„èª­ã¿è¾¼ã¿
const process = await ProcessRegistry.loadByNameAndHash('user-onboarding', 'a1b2c3d4');
process.bootstrap(container);
```

### Sagaã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã‚’å”èª¿å®Ÿè¡Œ
// å¤±æ•—æ™‚ã¯è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
// ActorDBã«Sagaå…¨ä½“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ°¸ç¶šåŒ–
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
performer-workspace/
â”œâ”€â”€ peformer/                    # ğŸ­ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æœ¬ä½“
â”‚   â”œâ”€â”€ src/processes/          # ğŸ“‹ ãƒ—ãƒ­ã‚»ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«é›†ç´„
â”‚   â”œâ”€â”€ src/rpc/                # ğŸ“¡ ActorDBé€šä¿¡
â”‚   â”œâ”€â”€ src/capabilities/       # ğŸ”’ æ¨©é™ç®¡ç†
â”‚   â””â”€â”€ src/index.ts            # ğŸ”Œ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯API
â”‚
â””â”€â”€ demo/                       # ğŸ¯ ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â”œâ”€â”€ app/main.ts             # ğŸš€ ãƒ—ãƒ­ã‚»ã‚¹å‹•çš„èª­ã¿è¾¼ã¿
    â”œâ”€â”€ index.html
    â””â”€â”€ package.json
```

## ğŸ­ ä½¿ç”¨ä¾‹

### å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹å®šç¾©

```typescript
// src/processes/user-onboarding.process.ts
export const processMetadata = {
  id: 'user-onboarding',
  name: 'User Onboarding Process',
  type: 'single',
  hash: 'a1b2c3d4'
};

// Effect-TS: å‹å®‰å…¨ãªAPIå‘¼ã³å‡ºã—
const checkUsername = Effect.gen(function*() {
  const result = yield* Effect.promise(() =>
    fetch('/api/check-username').then(r => r.json())
  );
  return result.available;
});

// XState: BPMNäº’æ›ã®çŠ¶æ…‹æ©Ÿæ¢°
export const onboardingMachine = createMachine({
  id: "userOnboarding",
  states: {
    enteringUsername: { /* BPMN: User Task */ },
    checkingUsername: { /* BPMN: Service Task */ },
    success: { /* BPMN: End Event */ }
  }
});

// Web Components: ãƒ—ãƒ­ã‚»ã‚¹UI
@customElement("username-input-step")
class UsernameInputStep extends FASTElement {
  /* UIå®šç¾© */
}
```

### Sagaãƒ—ãƒ­ã‚»ã‚¹å®šç¾©

```typescript
// src/processes/complete-user-onboarding.saga.ts
export const processMetadata = {
  id: 'complete-user-onboarding',
  name: 'Complete User Onboarding Saga',
  type: 'saga',
  hash: 'e5f6g7h8'
};

// 4ã¤ã®ã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:
// 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
// 2. ãƒ¡ãƒ¼ãƒ«æ¤œè¨¼é€ä¿¡
// 3. ã‚¦ã‚§ãƒ«ã‚«ãƒ é€šçŸ¥
// 4. ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
//
// ã„ãšã‚Œã‹ãŒå¤±æ•—ã—ãŸã‚‰è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
```

## ğŸ”„ å‹•çš„ãƒ—ãƒ­ã‚»ã‚¹èª­ã¿è¾¼ã¿

### ãƒ—ãƒ­ã‚»ã‚¹å + HashæŒ‡å®š

```typescript
// URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ãƒ—ãƒ­ã‚»ã‚¹æŒ‡å®š
?process=user-onboarding&hash=a1b2c3d4

// ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰å‹•çš„èª­ã¿è¾¼ã¿
const process = await ProcessRegistry.loadByNameAndHash('user-onboarding', 'a1b2c3d4');
```

### Hashæ¤œè¨¼ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥

- **Hashæ¤œè¨¼**: ãƒ—ãƒ­ã‚»ã‚¹æ”¹ã–ã‚“ã®æ¤œçŸ¥
- **è‡ªå‹•ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: å†èª­ã¿è¾¼ã¿ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: Hashã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

```bash
# ActorDBçµ±åˆãƒ†ã‚¹ãƒˆ
pnpm run test:actordb

# Sagaçµ±åˆãƒ†ã‚¹ãƒˆ
pnpm run test:saga

# å‹•çš„ãƒ—ãƒ­ã‚»ã‚¹èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
pnpm run test:dynamic

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼èµ·å‹•
pnpm run simulator
```

## ğŸ¨ BPMNãƒãƒƒãƒ”ãƒ³ã‚°

```typescript
// XStateãƒã‚·ãƒ³ã‚’BPMN JSONã«å¤‰æ›
const bpmnData = process.toBpmnJson();
// {
//   id: "userOnboarding",
//   nodes: [
//     { id: "enteringUsername", type: "userTask", description: "..." },
//     { id: "checkingUsername", type: "serviceTask", description: "..." }
//   ],
//   edges: [/* ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ•ãƒ­ãƒ¼ */]
// }
```

## ğŸ”— ActorDBçµ±åˆ

```typescript
// è‡ªå‹•ã‚¤ãƒ™ãƒ³ãƒˆæ°¸ç¶šåŒ–
await client.writeEvent({
  entityId: "user-123",
  eventType: "user_created",
  payload: { name: "John Doe" },
  timestamp: new Date(),
  version: 1
});

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚¯ã‚¨ãƒª
const userStats = await client.getProjection("user_statistics");
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§

- **ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°**: æœªä½¿ç”¨ãƒ—ãƒ­ã‚»ã‚¹ã¯ãƒãƒ³ãƒ‰ãƒ«ã‹ã‚‰é™¤å¤–
- **å‹•çš„èª­ã¿è¾¼ã¿**: å¿…è¦ãªãƒ—ãƒ­ã‚»ã‚¹ã®ã¿å®Ÿè¡Œæ™‚èª­ã¿è¾¼ã¿
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–**: Hashãƒ™ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- **WASMçµ±åˆ**: é«˜æ€§èƒ½è¨ˆç®—ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. Fork the repository
2. Create a feature branch
3. Add tests for new features
4. Submit a pull request

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - see LICENSE file for details

## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- [ActorDB](https://github.com/com-junkawasaki/dekigoto) - ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [Effect-TS](https://effect.website) - é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [XState](https://xstate.js.org) - ã‚¹ãƒ†ãƒ¼ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ
- [FAST](https://fast.design) - Web Componentsãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. Fork the repository
2. Create a feature branch
3. Add tests for new features
4. Submit a pull request

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - see LICENSE file for details

## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- [ActorDB](https://github.com/com-junkawasaki/dekigoto) - ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [Effect-TS](https://effect.website) - é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [XState](https://xstate.js.org) - ã‚¹ãƒ†ãƒ¼ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ
- [FAST](https://fast.design) - Web Componentsãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
